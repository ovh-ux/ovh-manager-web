<div class="container-fluid px-0" data-ng-controller="PrivateDatabaseConfigurationsCtrl as configurationsCtrl">

    <div data-ovh-alert="{{alerts.main}}"></div>

    <div class="text-center" data-ng-if="configurationsCtrl.loading">
        <oui-spinner data-size="l"></oui-spinner>
    </div>

    <div data-ng-if="!configurationsCtrl.loading">

        <oui-message data-type="info"
             data-ng-if="configurationsCtrl.database.type === 'postgresql'">
            <span data-i18n-static="privateDatabase_configurations_general_postgresql_soon"></span>
        </oui-message>
        <oui-message data-type="info"
             data-ng-if="configurationsCtrl.database.type !== 'postgresql' && configurationsCtrl.configurations.length === 0">
            <span data-i18n-static="privateDatabase_capability_disabled_explanation"></span>
        </oui-message>

        <div data-ng-if="configurationsCtrl.configurations.length >= 1">

            <oui-message data-type="warning">
                <span data-i18n-static="privateDatabase_configuration_alert"></span>
            </oui-message>

            <h2 data-ng-bind-html="tr('privateDatabase_configurations_general_' + configurationsCtrl.database.type)"></h2>

            <form name="configurationsCtrl.dbConfigurationForm" data-ng-submit="configurationsCtrl.updateConfigurations()">
                <div data-ng-repeat="configuration in configurationsCtrl.configurations track by $index">
                    <oui-field data-label="{{:: configuration.key}}"
                               data-size="m"
                               data-ng-if="configuration.type === 'select'"
                               data-help-text="{{:: configuration.description}}">
                        <oui-select id="{{:: configuration.key + 'Field'}}"
                                    name="{{:: configuration.key + 'Field'}}"
                                    data-model="configuration.selectedValue"
                                    data-items="configuration.availableValues"
                                    data-match="text"
                                    required
                                    data-align="start">
                            <span data-ng-bind="$item.text"></span>
                        </oui-select>
                    </oui-field>
                </div>
                <div data-ng-repeat="configuration in configurationsCtrl.configurations track by $index">
                    <oui-field data-label="{{:: configuration.key}}"
                               data-size="s"
                               data-ng-if="configuration.type === 'toggle'"
                               data-help-text="{{:: configuration.description}}">
                        <oui-radio-toggle-group data-model="configuration.selectedValue.id">
                           <oui-radio data-ng-repeat="item in configuration.availableValues track by item.id"
                                      data-text="{{:: item.text}}"
                                      data-value="item.id"></oui-radio>
                        </oui-radio-toggle-group>
                    </oui-field>
                </div>
                <oui-form-actions data-submit-text="{{:: tr('privateDatabase_configuration_confirm_btn') }}"></oui-form-actions>
            </form>
        </div>
    </div>
</div>
