<!-- Skip to main content -->
<div class="skipnav">
    <a class="oui-button oui-button_link" href=""
        data-ng-bind="::$ctrl.tr('common_skip_to_main_content')"
        data-ng-click="$ctrl.scrollToMainContent()">
    </a>
</div>

<!-- Navbar -->
<nav class="oui-navbar oui-navbar_fixed">

    <!-- Toggler -->
    <button class="oui-navbar-toggler" type="button"
        aria-haspopup="true" aria-expanded="{{$ctrl.navbarNav['toggler']}}"
        data-ng-click="$ctrl.toggleMenu('toggler')"
        data-keyboard-navigation="toggler">
        <span class="oui-navbar-toggler__hamburger">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </span>
    </button>
    <div class="oui-navbar-menu oui-navbar-menu_fixed oui-navbar-menu_toggle">
        <ul class="oui-navbar-list">
            <li class="oui-navbar-list__item" data-ng-repeat="managerLink in $ctrl.navigation.managerLinks track by $index">
                <a class="oui-navbar-link"
                    data-ng-if="::!managerLink.subLinks"
                    data-ng-class="{ 'oui-navbar-link_active': managerLink.name === $ctrl.currentUniverse }"
                    data-ng-click="$ctrl.toggleMenu()"
                    data-ng-href="{{::managerLink.url}}"
                    data-ng-bind="::managerLink.title"
                    data-keyboard-navigation="toggler"
                    data-is-last="::$last">
                </a>
                <button class="oui-navbar-link" id="{{::'manager-navbar__' + managerLink.name + '_toggler'}}" type="button"
                    aria-haspopup="true" aria-expanded="{{$ctrl.navbarNav[managerLink.name]}}"
                    data-ng-if="::!!managerLink.subLinks"
                    data-ng-class="{ 'oui-navbar-link_active': managerLink.name === $ctrl.currentUniverse }"
                    data-ng-click="$ctrl.toggleMenu(managerLink.name, true)"
                    data-ng-bind="::managerLink.title"
                    data-keyboard-navigation="toggler"
                    data-is-last="::$last">
                </button>

                <!-- Navbar Menu -->
                <manager-navbar-menu
                    data-ng-if="::!!managerLink.subLinks"
                    data-header-title="{{::managerLink.label}}"
                    data-menu-name="{{::managerLink.name}}"
                    data-menu-links="::managerLink.subLinks"
                    data-navbar-nav="$ctrl.navbarNav"
                    data-is-open="$ctrl.navbarNav[managerLink.name]">
                </manager-navbar-menu>
                <!-- /Navbar Menu -->

            </li>
        </ul>
    </div>
    <!-- /Toggler -->

    <!-- Brand -->
    <a class="oui-navbar__brand"
        data-ng-attr-aria-label="$ctrl.navigation.brand.label"
        data-ng-href="{{::$ctrl.navigation.brand.url}}">
        <img class="navbar-logo" src="assets/images/navbar/icon-logo-ovh.svg" alt="OVH">
    </a>
    <!-- /Brand -->

    <!-- Managers -->
    <ul class="oui-navbar-list oui-navbar_desktop-only">
        <li class="oui-navbar-list__item" data-ng-repeat="managerLink in $ctrl.navigation.managerLinks track by $index">
            <a class="oui-navbar-link {{::managerLink.name}}"
                data-ng-class="{
                    'oui-navbar-link_active': managerLink.name === $ctrl.currentUniverse,
                    'oui-navbar-link_primary': managerLink.isPrimary,
                    'oui-navbar-link_secondary': !managerLink.isPrimary
                }"
                data-ng-href="{{::managerLink.url}}"
                data-ng-bind="::managerLink.label">
            </a>
        </li>
    </ul>
    <!-- /Managers -->

    <!-- Internal -->
    <ul class="oui-navbar-list oui-navbar-list_end">
        <li class="oui-navbar-list__item" data-ng-repeat="internalLink in $ctrl.navigation.internalLinks">
            <button class="oui-navbar-link oui-navbar-link_icon" type="button"
                aria-haspopup="true" aria-expanded="{{$ctrl.navbarNav[internalLink.name]}}"
                data-ng-click="$ctrl.toggleMenu(internalLink.name)"
                data-keyboard-navigation="{{::internalLink.name}}">
                <span class="oui-icon" aria-hidden="true"
                    data-ng-class="::'navbar-' + internalLink.iconClass">
                </span>
                {{::internalLink.label}}
            </button>
            <div class="oui-navbar-menu oui-navbar-menu_fixed oui-navbar-menu_right">

                <!-- Menu Header for 'user' -->
                <header class="oui-navbar-menu__header navbar-user" data-ng-if="internalLink.name === 'user'">
                    <span>
                        <strong data-ng-bind="::$ctrl.tr('global_user')"></strong>
                        ({{::$ctrl.currentUser.nichandle}})
                    </span>
                    <h3 class="oui-navbar-menu__title">
                        {{::$ctrl.currentUser.firstName}} {{::$ctrl.currentUser.lastName}}
                    </h3>
                </header>
                <!-- /Menu Header for 'user' -->

                <!-- General Menu Header -->
                <header class="oui-navbar-menu__header oui-navbar_mobile-only" data-ng-if="internalLink.name !== 'user'">
                    <h3 class="oui-navbar-menu__title" data-ng-bind="::internalLink.label"></h3>
                </header>
                <!-- General Menu Header -->

                <ul class="oui-navbar-list">
                    <li class="oui-navbar-list__item" data-ng-repeat="subLink in internalLink.subLinks track by $index">

                        <!-- Link -->
                        <a class="oui-navbar-link"
                            data-ng-if="!!subLink.url"
                            data-ng-attr-target="{{::subLink.isExternal ? '_blank' : undefined}}"
                            data-ng-class="::subLink.variantClass"
                            data-ng-click="$ctrl.toggleMenu()"
                            data-ng-href="{{::subLink.url}}"
                            data-keyboard-navigation="{{::internalLink.name}}"
                            data-is-last="::$last">
                            <span data-ng-bind="::subLink.label"></span>
                            <span class="navbar-external-link" aria-hidden="true"
                                data-ng-if="::subLink.isExternal">
                            </span>
                        </a>
                        <!-- Link -->

                        <!-- Button -->
                        <button class="oui-navbar-link" type="button"
                            data-ng-if="!!subLink.click"
                            data-ng-class="subLink.variantClass"
                            data-ng-click="subLink.click($ctrl.toggleMenu)"
                            data-ng-bind="::subLink.label"
                            data-keyboard-navigation="{{::internalLink.name}}"
                            data-is-last="::$last">
                        </button>
                        <!-- Button -->

                    </li>
                </ul>
            </div>
        </li>
    </ul>
    <!-- /Internal -->

    <!-- Backdrop -->
    <div class="oui-navbar-backdrop" aria-hidden="true"
        data-ng-class="{ 'oui-navbar-backdrop_active': !!$ctrl.navbarNav }"
        data-ng-click="$ctrl.toggleMenu()">
    </div>
    <!-- /Backdrop -->

</nav>
<!-- Navbar -->
